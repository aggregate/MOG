BIN               := mog

CUDA_INSTALL_PATH ?= /usr/local/cuda-5.0
#CUDA_SDK_PATH ?= $(HOME)/NVIDIA_GPU_Computing_SDK

NVCC ?= $(CUDA_INSTALL_PATH)/bin/nvcc
CC ?= gcc
INCD = -I"$(CUDA_SDK_PATH)/C/common/inc" -I"$(CUDA_INSTALL_PATH)/include" -I"$(CUDA_INSTALL_PATH)/samples/common/inc"
LIBS = -L"$(CUDA_INSTALL_PATH)/lib64" -lcudart
#COMMONFLAGS = -DCUDA_SDK=$(CUDA_SDK)

# CUDA source files (compiled with nvcc)
CU_SOURCES      := mog.cu
MOG_DEPS         := \
        op.h \
        do.h \
        pr.h \
        mog.h \
        mogas
CU_OBJS           := $(patsubst %.cu, %.cu.o, $(CU_SOURCES))

mog.cu.o: mog.cu $(MOG_DEPS)
	$(NVCC) -c $(INCD) -o $@ $<

#mog_syscall.o: mog_syscall.c mog_syscall.h
#	gcc -c -o $@ $< 

#$(BIN): $(CU_OBJS)
#	$(CC) -o $(BIN) $(CU_OBJS) mog_syscall.o $(INCD) $(LIBS)

clean:
	rm -f $(BIN) *.o *.cu.o
